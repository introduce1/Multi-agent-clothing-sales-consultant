# å¤šæ™ºèƒ½ä½“æœè£…é”€å”®é¡¾é—®

ä¸€ä¸ªåŸºäºå¤šæ™ºèƒ½ä½“æ¶æ„çš„æœè£…é”€å”®é¡¾é—®ï¼Œæ”¯æŒæ™ºèƒ½å¯¹è¯ã€è®¢å•å¤„ç†ã€çŸ¥è¯†åº“ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **å¤šæ™ºèƒ½ä½“åä½œ**: æ”¯æŒæ¥å¾…ã€é”€å”®ã€è®¢å•ã€çŸ¥è¯†ã€æ­é…ç­‰å¤šä¸ªä¸“ä¸šæ™ºèƒ½ä½“
- **æ™ºèƒ½è·¯ç”±**: åŸºäºæ„å›¾è¯†åˆ«çš„ç²¾ç¡®æ™ºèƒ½ä½“è·¯ç”±
- **æ™ºèƒ½å¯¹è¯**: åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„è‡ªç„¶è¯­è¨€ç†è§£å’Œç”Ÿæˆ
- **çŸ¥è¯†åº“ç®¡ç†**: æ”¯æŒFAQã€äº§å“ä¿¡æ¯ã€æ”¿ç­–æ–‡æ¡£ç­‰çŸ¥è¯†ç®¡ç†
- **è®¢å•å¤„ç†**: å®Œæ•´çš„è®¢å•ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **å®¢æˆ·ç®¡ç†**: å®¢æˆ·ä¿¡æ¯ã€ç”»åƒã€äº¤äº’å†å²ç®¡ç†
- **æ­é…å»ºè®®**: ä¸“ä¸šçš„æœè£…æ­é…å’Œé£æ ¼æ¨è

### æŠ€æœ¯ç‰¹æ€§
- **å¼‚æ­¥æ¶æ„**: åŸºäºFastAPIçš„é«˜æ€§èƒ½å¼‚æ­¥Webæ¡†æ¶
- **å¾®æœåŠ¡è®¾è®¡**: æ¨¡å—åŒ–çš„æ™ºèƒ½ä½“æ¶æ„ï¼Œæ˜“äºæ‰©å±•
- **å®æ—¶é€šä¿¡**: WebSocketæ”¯æŒå®æ—¶å¯¹è¯
- **æ•°æ®åˆ†æ**: å®Œæ•´çš„æ€§èƒ½ç›‘æ§å’Œä¸šåŠ¡åˆ†æ
- **å¤šæ¸ é“æ¥å…¥**: æ”¯æŒWebã€ç§»åŠ¨ç«¯ã€å¾®ä¿¡ç­‰å¤šç§æ¸ é“
- **æ™ºèƒ½åä½œ**: æ”¯æŒå¤šæ™ºèƒ½ä½“å¹¶è¡Œã€ä¸²è¡Œã€å’¨è¯¢ç­‰å¤šç§åä½œæ¨¡å¼

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Webå‰ç«¯ç•Œé¢   â”‚    â”‚   ç§»åŠ¨ç«¯åº”ç”¨    â”‚    â”‚   ç¬¬ä¸‰æ–¹é›†æˆ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      APIç½‘å…³å±‚           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    æ™ºèƒ½ä½“ç¼–æ’å™¨          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®¢æœæ™ºèƒ½ä½“   â”‚    â”‚    é”€å”®æ™ºèƒ½ä½“       â”‚    â”‚ è®¢å•å¤„ç†æ™ºèƒ½ä½“ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                       â”‚                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      æ•°æ®å­˜å‚¨å±‚          â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚ æ•°æ®åº“  â”‚ â”‚ ç¼“å­˜å±‚  â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
å®¢æœç³»ç»Ÿ/
â”œâ”€â”€ agents/                 # æ™ºèƒ½ä½“æ¨¡å—
â”‚   â”œâ”€â”€ base_agent.py      # åŸºç¡€æ™ºèƒ½ä½“ç±»
â”‚   â”œâ”€â”€ reception_agent.py  # æ¥å¾…æ™ºèƒ½ä½“ï¼ˆæ„å›¾è¯†åˆ«å’Œè·¯ç”±ï¼‰
â”‚   â”œâ”€â”€ sales_agent.py     # é”€å”®æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ order_agent.py     # è®¢å•å¤„ç†æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ knowledge_agent.py # çŸ¥è¯†æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ styling_agent.py   # æ­é…æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ agent_dispatcher.py # æ™ºèƒ½ä½“è°ƒåº¦å™¨
â”‚   â””â”€â”€ smart_collaboration.py # æ™ºèƒ½åä½œç³»ç»Ÿ
â”œâ”€â”€ api/                   # APIæ¥å£å±‚
â”‚   â”œâ”€â”€ routers/          # è·¯ç”±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ chat.py       # å¯¹è¯æ¥å£
â”‚   â”‚   â”œâ”€â”€ agents.py     # æ™ºèƒ½ä½“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ analytics.py  # åˆ†æç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ health.py     # å¥åº·æ£€æŸ¥
â”‚   â”‚   â”œâ”€â”€ sessions.py   # ä¼šè¯ç®¡ç†
â”‚   â”‚   â””â”€â”€ products.py   # äº§å“ç®¡ç†
â”‚   â””â”€â”€ middleware/       # ä¸­é—´ä»¶
â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ customer.py       # å®¢æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ order.py          # è®¢å•æ¨¡å‹
â”‚   â”œâ”€â”€ knowledge.py      # çŸ¥è¯†åº“æ¨¡å‹
â”‚   â”œâ”€â”€ session.py        # ä¼šè¯æ¨¡å‹
â”‚   â”œâ”€â”€ analytics.py      # åˆ†ææ¨¡å‹
â”‚   â”œâ”€â”€ product.py        # äº§å“æ¨¡å‹
â”‚   â””â”€â”€ database.py       # æ•°æ®åº“é…ç½®
â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ settings.py       # ç³»ç»Ÿé…ç½®
â”œâ”€â”€ services/             # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ llm_service.py    # LLMæœåŠ¡
â”‚   â”œâ”€â”€ context_service.py # ä¸Šä¸‹æ–‡æœåŠ¡
â”‚   â””â”€â”€ product_search_service.py # äº§å“æœç´¢æœåŠ¡
â”œâ”€â”€ utils/                # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ logger.py         # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ dependencies.py   # ä¾èµ–æ³¨å…¥
â”œâ”€â”€ data/                 # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ knowledge_base/   # çŸ¥è¯†åº“æ•°æ®
â”‚   â””â”€â”€ product_catalog/  # äº§å“ç›®å½•
â”œâ”€â”€ main.py               # åº”ç”¨å…¥å£
â””â”€â”€ requirements.txt      # ä¾èµ–åŒ…
```

## ğŸ› ï¸ å®‰è£…éƒ¨ç½²

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- PostgreSQL 12+ (å¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨SQLite)
- Redis 6+ (å¯é€‰ï¼Œç”¨äºç¼“å­˜)

### å¿«é€Ÿå¼€å§‹


1. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯
```

3. **åˆå§‹åŒ–æ•°æ®åº“**
```bash
python -c "from models.database import init_db; init_db()"
```

4. **å¯åŠ¨æœåŠ¡**
```bash
python main.py
# æˆ–ä½¿ç”¨uvicorn
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

5. **è®¿é—®æœåŠ¡**
- APIæ–‡æ¡£: http://localhost:8000/docs
- å¥åº·æ£€æŸ¥: http://localhost:8000/health

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```env
# åº”ç”¨é…ç½®
APP_NAME=æ™ºèƒ½å®¢æœç³»ç»Ÿ
APP_VERSION=1.0.0
DEBUG=true
SECRET_KEY=your-secret-key

# æ•°æ®åº“é…ç½®
DATABASE_URL=sqlite:///./customer_service.db
# æˆ–ä½¿ç”¨PostgreSQL
# DATABASE_URL=postgresql://user:password@localhost/dbname

# Redisé…ç½®
REDIS_URL=redis://localhost:6379/0

# AIæ¨¡å‹é…ç½®
OPENAI_API_KEY=your-openai-api-key
OPENAI_BASE_URL=https://api.openai.com/v1

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_FILE=logs/app.log
```

### æ™ºèƒ½ä½“é…ç½®

åœ¨ `config/settings.py` ä¸­å¯ä»¥é…ç½®å„ä¸ªæ™ºèƒ½ä½“çš„å‚æ•°ï¼š

```python
AGENT_CONFIG = {
    "reception_agent": {
        "model": "gpt-4o",
        "temperature": 0.3,
        "max_tokens": 1000
    },
    "sales_agent": {
        "model": "gpt-4o",
        "temperature": 0.7,
        "max_tokens": 1500
    },
    "order_agent": {
        "model": "gpt-4o",
        "temperature": 0.2,
        "max_tokens": 1200
    },
    "knowledge_agent": {
        "model": "gpt-4o",
        "temperature": 0.4,
        "max_tokens": 2000
    },
    "styling_agent": {
        "model": "gpt-4o",
        "temperature": 0.8,
        "max_tokens": 1800
    }
}
```

## ğŸ“š APIæ–‡æ¡£

### ä¸»è¦æ¥å£

#### å¯¹è¯æ¥å£
- `POST /api/chat/send` - å‘é€æ¶ˆæ¯
- `GET /api/chat/sessions` - è·å–ä¼šè¯åˆ—è¡¨
- `GET /api/chat/sessions/{session_id}` - è·å–ç‰¹å®šä¼šè¯è¯¦æƒ…
- `WebSocket /api/chat/stream` - å®æ—¶å¯¹è¯
- `GET /api/chat/suggestions` - è·å–å¯¹è¯å»ºè®®

#### æ™ºèƒ½ä½“ç®¡ç†
- `GET /api/agents` - è·å–æ™ºèƒ½ä½“åˆ—è¡¨
- `GET /api/agents/{agent_id}` - è·å–æ™ºèƒ½ä½“è¯¦æƒ…
- `GET /api/agents/{agent_id}/stats` - è·å–æ™ºèƒ½ä½“æ€§èƒ½ç»Ÿè®¡
- `POST /api/agents/{agent_id}/restart` - é‡å¯æ™ºèƒ½ä½“

#### ä¼šè¯ç®¡ç†
- `GET /api/sessions` - è·å–æ‰€æœ‰ä¼šè¯
- `GET /api/sessions/{session_id}` - è·å–ä¼šè¯è¯¦æƒ…
- `PUT /api/sessions/{session_id}` - æ›´æ–°ä¼šè¯çŠ¶æ€
- `DELETE /api/sessions/{session_id}` - åˆ é™¤ä¼šè¯

#### åˆ†æç»Ÿè®¡
- `GET /api/analytics/overview` - è·å–æ¦‚è§ˆæ•°æ®
- `GET /api/analytics/performance` - è·å–æ€§èƒ½åˆ†æ
- `GET /api/analytics/business` - è·å–ä¸šåŠ¡åˆ†æ
- `GET /api/analytics/collaboration` - è·å–åä½œåˆ†æ

#### äº§å“ç®¡ç†
- `GET /api/products` - è·å–äº§å“åˆ—è¡¨
- `GET /api/products/{product_id}` - è·å–äº§å“è¯¦æƒ…
- `GET /api/products/search` - æœç´¢äº§å“

è¯¦ç»†APIæ–‡æ¡£è¯·è®¿é—®: http://localhost:8000/docs

è¯¦ç»†APIæ–‡æ¡£è¯·è®¿é—®: http://localhost:8000/docs



## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—é…ç½®
ç³»ç»Ÿä½¿ç”¨ `loguru` è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œæ”¯æŒï¼š
- ç»“æ„åŒ–æ—¥å¿—è¾“å‡º
- æ—¥å¿—è½®è½¬å’Œå‹ç¼©
- å¤šçº§åˆ«æ—¥å¿—è¿‡æ»¤
- æ€§èƒ½ç›‘æ§æ—¥å¿—

### æ€§èƒ½ç›‘æ§
- PrometheusæŒ‡æ ‡å¯¼å‡º
- ç³»ç»Ÿèµ„æºç›‘æ§
- ä¸šåŠ¡æŒ‡æ ‡ç»Ÿè®¡
- å‘Šè­¦è§„åˆ™é…ç½®

### å¥åº·æ£€æŸ¥
è®¿é—® `/health` ç«¯ç‚¹è·å–ç³»ç»Ÿå¥åº·çŠ¶æ€ï¼š
```json
{
  "status": "healthy",
  "timestamp": "2024-01-01T12:00:00Z",
  "version": "1.0.0",
  "uptime": 3600,
  "agents": {
    "customer_service": "active",
    "sales_agent": "active",
    "order_agent": "active"
  }
}
```



